Короче говоря, теорию я понимаю, но практическую часть без помощи выполнить не смог.
Main — первую часть с логикой `if` я понимаю отлично,  
но как там применить `Extenses` — не разобрался.  
Main2 — сгенерировано, это не моя работа, я добавил туда только `finally`.

